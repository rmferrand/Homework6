[
  {
    "objectID": "WritingFunctions.html",
    "href": "WritingFunctions.html",
    "title": "WritingFunctions",
    "section": "",
    "text": "Purpose: This program seeks to complete the exercises listed in Homework 6, for ST558. Task 1 consists of conceptual based questions that will be similar to the upcoming Exam. Task 2 is concerned with function writing and the science behind wrapper functions. Task 3 builds on what we know from API’s and combines it with function creation to allow for specific api manipulation to find summary statistics."
  },
  {
    "objectID": "WritingFunctions.html#task-1-conceptual-questions",
    "href": "WritingFunctions.html#task-1-conceptual-questions",
    "title": "WritingFunctions",
    "section": "Task 1: Conceptual Questions",
    "text": "Task 1: Conceptual Questions\n\nWhat is the purpose of the lapply() function? What is the equivalent purrr function?\nlapply() applies a function to a list and obtains a list object as an output. It allows for cleaner and simpler syntax of repetitive operations. The equivalent purrr function is map().\nSuppose we have a list called my_list. Each element of the list is a numeric data frame (all columns are numeric). We want use lapply() to run the code cor(numeric_matrix, method = “kendall”) on each element of the list. Write code to do this below! (I’m really trying to ask you how you specify method = “kendall” when calling lapply())\nlapply(my_list, function(numeric_matrix) cor(numeric_matrix, method = \"kendall\"))\nWhat are two advantages of using purrr functions instead of the BaseR apply family?\n\nMore consistency and some helper functions that are not available in BaseR\npurrr allows the writing of functional code with less friction and greater ease, it decreases the gap between thinking of and implementing code (as per hadley)\n\nWhat is a side-effect function?\nSide-effect function is a function that does not try to transform or change the data (like a transformation function) it just tries to produce something, or change the state of something like the console, the plots, etc.\nWhy can you name a variable sd in a function and not cause any issues with the sd function?\nWhen you call a function, it creates temporary function environments. Due to the lexical scoping, the variables inside of functions (local scope) do not override the global scope, meaning sd() outside of the function will be unaffected."
  },
  {
    "objectID": "WritingFunctions.html#task-2-writing-r-functions",
    "href": "WritingFunctions.html#task-2-writing-r-functions",
    "title": "WritingFunctions",
    "section": "Task 2: Writing R Functions",
    "text": "Task 2: Writing R Functions\nLet’s load in the required libraries for this section:\n\nlibrary(tidyverse)\n\n\ngetRMSE()\nLet’s create a function called getRMSE() that takes in a vector of responses and a vector of predictions and outputs the root mean square error. Very clearly, we just break down the formula step by step, and assign the variables like so.\n\ngetRMSE = function(resp, pred, ...){\n  SE &lt;- (resp-pred)^2\n  MSE &lt;- mean(SE, ...)\n  RMSE &lt;- sqrt(MSE)\n  return(RMSE)\n}\n\nNow using a set seed, we create response values and predictions in the form of vectors for testing. We will use this repeatedly.\n\nset.seed(10)\nn &lt;- 100\nx &lt;- runif(n)\nresp &lt;- 3 + 10 * x + rnorm(n)\npred &lt;- predict(lm(resp ~ x), data.frame(x))\n\n#test the function using resp and pred vectors!\ngetRMSE(resp = resp, pred = pred)\n\n[1] 0.9581677\n\n\nNow setting two of the response values to NA’s, we can test out the ellipses to make sure that they can take the na.rm argument:\n\nresp[1] &lt;- NA_real_\nresp[2] &lt;- NA_real_\n\n#doesn't work!\ngetRMSE(resp = resp, pred = pred)\n\n[1] NA\n\n#works!\ngetRMSE(resp = resp, pred = pred, na.rm = TRUE)\n\n[1] 0.9661699\n\n\n\n\ngetMAE()\nNext, we are interested in creating a function for mean absolute error. This follows the same general format of the getRMSE() function, except now just with a new formula.\n\ngetMAE = function(resp, pred, ...){\n  AE &lt;- abs(resp-pred)\n  MAE &lt;- mean(AE, ...)\n  return(MAE)\n}\n\nGetting response values and predictions and testing allows us to make sure getMAE() follows the same specifications.\n\nn &lt;- 100\nx &lt;- runif(n)\nresp &lt;- 3 + 10 * x + rnorm(n)\npred &lt;- predict(lm(resp ~ x), data.frame(x))\n\n#no NA's in the data\ngetMAE(resp = resp, pred = pred)\n\n[1] 0.763681\n\nresp[1] &lt;- NA_real_\nresp[2] &lt;- NA_real_\n\n#doesn't work!\ngetMAE(resp = resp, pred = pred)\n\n[1] NA\n\n#works!\ngetMAE(resp = resp, pred = pred, na.rm = TRUE)\n\n[1] 0.7670436\n\n\n\n\nCreating a wrapper function, wrapperError()\nLet’s create a wrapper function that takes the prediction and response vectors, and allows the user to choose from different metrics. Note that if the vectors are not atomic, numeric, or not vectors, it will return error. Furthermore, if one of the required metrics is not specified, it will also return an error. Using the binary operator %in%, we can verify if the metrics are called, and if they are, it will return them as requested.\n\nwrapperError &lt;- function(pred, resp, metrics = c(\"RMSE\", \"MAE\"), ...){\n  errorResults &lt;- list()\n  if (!(is.vector(resp) && is.vector(pred) && is.atomic(resp) && is.atomic(pred) && is.numeric(resp) && is.numeric(pred)))\n  {\n    stop(\"Must pass a vector, must be numeric and/or must be atomic.\")\n  }\n  \n  if (!all(metrics %in% c(\"RMSE\", \"MAE\"))){\n    stop(\"Invalid or Incorrect Metrics Selected.\")\n  }\n  \n  if(\"RMSE\" %in% metrics){\n     errorResults$RMSE &lt;- getRMSE(pred, resp, ...)\n  }\n  if (\"MAE\" %in% metrics){\n    errorResults$MAE &lt;- getMAE(pred, resp, ...)\n  }\n  return(errorResults)\n}\n\nNow, let’s test this wrapper function. We set the same data to get the vectors. Let’s first make sure the metrics allows us to specify one and both(default).\n\n#test using this data\nset.seed(10)\nn &lt;- 100\nx &lt;- runif(n)\nresp &lt;- 3 + 10 * x + rnorm(n)\npred &lt;- predict(lm(resp ~ x), data.frame(x))\n\n#one at a time\nwrapperError(pred = pred, resp = resp, metrics = \"RMSE\")\n\n$RMSE\n[1] 0.9581677\n\nwrapperError(pred = pred, resp = resp, metrics = \"MAE\")\n\n$MAE\n[1] 0.8155776\n\n\n\n#both (default is both)\nwrapperError(pred = pred, resp = resp)\n\n$RMSE\n[1] 0.9581677\n\n$MAE\n[1] 0.8155776\n\nwrapperError(pred = pred, resp = resp, metrics = c(\"MAE\", \"RMSE\"))\n\n$RMSE\n[1] 0.9581677\n\n$MAE\n[1] 0.8155776\n\n\nLet’s add missing values and make sure we can do the same thing with na.rm:\n\n#missing test\nresp[1] &lt;- NA_real_\nresp[2] &lt;- NA_real_\nwrapperError(pred = pred, resp = resp, na.rm = TRUE)\n\n$RMSE\n[1] 0.9661699\n\n$MAE\n[1] 0.8241201\n\n\nLet’s test the error for when passing something that is not a vector, atomic, or numeric:\n\n#incorrect data\npred = as.data.frame(pred)\nwrapperError(pred = pred, resp = resp)\n\nError in wrapperError(pred = pred, resp = resp): Must pass a vector, must be numeric and/or must be atomic.\n\n\nLet’s also test the error when specifying something that is not one of the two metrics listed above\n\n#trying it with incorrect metric\npred &lt;- predict(lm(resp ~ x), data.frame(x))\nwrapperError(pred = pred, resp = resp, metric = \"MSE\")\n\nError in wrapperError(pred = pred, resp = resp, metric = \"MSE\"): Invalid or Incorrect Metrics Selected."
  },
  {
    "objectID": "WritingFunctions.html#task-3-querying-an-api-and-a-tidy-style-function",
    "href": "WritingFunctions.html#task-3-querying-an-api-and-a-tidy-style-function",
    "title": "WritingFunctions",
    "section": "Task 3: Querying an Api and a Tidy-Style Function",
    "text": "Task 3: Querying an Api and a Tidy-Style Function\nIn particular, I am interested in seeing the recent hurricane news since I am from Tampa Bay, and hurricane Milton hit us pretty hard.\nLet’s load the appropriate libraries for this section:\n\nlibrary(httr)\nlibrary(jsonlite)\nlibrary(lubridate)\n\n\nUsing pluck() to Retrieve Information\nUsing GET(), fromJSON(), and pluck(), we can return various articles and the corresponding dataframe that has the article information. The first few rows are printed.\n\nid_info &lt;- GET(\"https://newsapi.org/v2/everything?q=hurricane&apiKey=7cb2cc16f78541a0bec77fe5e6ddc45a\")\n#str(id_info, max.level = 1)\n\nparsed &lt;- fromJSON(rawToChar(id_info$content))\narticles &lt;- pluck(parsed, \"articles\")\narticles_df &lt;- as.data.frame(articles)\nhead(articles_df)\n\n  source.id source.name        author\n1      &lt;NA&gt;   [Removed]          &lt;NA&gt;\n2     wired       Wired Matt Reynolds\n3     wired       Wired     Alec Luhn\n4     wired       Wired  Tommy Greene\n5      &lt;NA&gt; Gizmodo.com Isaac Schultz\n6      &lt;NA&gt; Gizmodo.com    Adam Kovac\n                                                                      title\n1                                                                 [Removed]\n2                            Why Tampa Is So Vulnerable to Hurricane Milton\n3 Hurricane Milton Shows How a Storm’s Category Doesn’t Tell the Full Story\n4  Hurricane Helene Will Send Shockwaves Through the Semiconductor Industry\n5          Satellite Images Reveal Hurricane Helene’s Devastating Aftermath\n6                    What to Expect When Hurricane Milton Rams Into Florida\n                                                                                                                                                                                                          description\n1                                                                                                                                                                                                           [Removed]\n2                                                          Tampa, Florida is the most vulnerable US city to hurricane damage. Delays to floodwater defenses and relentless development only made the situation worse.\n3 Milton’s reclassification to a Category 3 storm suggests it is weakening, but the scale accounts only for wind speed and not hurricane size, storm surge heights, or rainfall—which are all catastrophically large.\n4 Downpours at Spruce Pine, North Carolina have taken the biggest known deposit of high-purity quartz offline, leaving the global tech supply chain potentially starved of an ingredient vital for making microchips.\n5                                                                                                                    Images from space show vast swaths of the American southeast without power days after the storm.\n6                                                                        The monster storm will have winds reaching 150 miles (241 kilometers) per hour, and will dump an enormous amount of rain on coastal Florida.\n                                                                                                                                             url\n1                                                                                                                            https://removed.com\n2                                                                    https://www.wired.com/story/why-tampa-is-so-vulnerable-to-hurricane-milton/\n3                                                            https://www.wired.com/story/hurricane-milton-storm-category-doesnt-tell-full-story/\n4 https://www.wired.com/story/hurricane-helene-shockwaves-semiconductor-industry-microchips-spruce-pine-north-carolina-sand-high-quality-quartz/\n5                                                 https://gizmodo.com/satellite-images-reveal-hurricane-helenes-devastating-aftermath-2000507474\n6                                                          https://gizmodo.com/what-to-expect-when-hurricane-milton-rams-into-florida-2000509193\n                                                                                                                urlToImage\n1                                                                                                                     &lt;NA&gt;\n2         https://media.wired.com/photos/67057ef4d2d0817a9e1c0f3b/191:100/w_1280,c_limit/Science_TGH_storm_prep-4356-1.jpg\n3   https://media.wired.com/photos/67055d40b4b45ab73775f3d9/191:100/w_1280,c_limit/Science_Hurricane-Milton_APNewsroom.jpg\n4 https://media.wired.com/photos/66fb1e03c80e335f6471a5f5/191:100/w_1280,c_limit/science_hurricane_helene_silicon_tech.jpg\n5                                               https://gizmodo.com/app/uploads/2024/10/NOAA-20-satellite-helene-power.jpg\n6                                     https://gizmodo.com/app/uploads/2024/10/milton-satellite-image-hurricane-florida.jpg\n           publishedAt\n1 2024-10-04T12:00:10Z\n2 2024-10-09T18:36:34Z\n3 2024-10-09T23:32:18Z\n4 2024-10-01T11:48:00Z\n5 2024-10-04T16:20:39Z\n6 2024-10-08T17:35:52Z\n                                                                                                                                                                                                                   content\n1                                                                                                                                                                                                                [Removed]\n2   For more than a century, Tampa Bay has avoided Floridas most destructive hurricanes. Now Hurricane Milton may end that streak of luck, as the storm is expected to make landfall just south of Tampa Ba… [+2914 chars]\n3   Miltons enormous storm surge has also highlighted the growing danger from water. More intense hurricanes are pushing higher storm surges due to sea-level rise. These hurricanes on steroids, as Olson … [+3114 chars]\n4 A spokesperson for Sibelco said: As of September 26th, we have temporarily halted operations at the Spruce Pine facilities in response to these challenges.\\r\\nWe are working closely with our local team… [+3757 chars]\n5 Satellite images of the American southeast taken over the past few days are showcasing the disastrous impacts of Hurricane Helene at scale.\\r\\nThe images were taken by National Oceanic and Atmospheric … [+3345 chars]\n6   When Hurricane Milton makes landfall, it will bring devastating winds, torrential rains, and dangerous storm surges that government officials say pose a major threat to human life and property. Heres… [+5284 chars]\n\n\n\n\nQuery the API\nStarting off with a base URL, we can make a function that takes topic of interest, the time period, and an API Key so that the user can find relevant information with those parameters.\n\nbase_url &lt;- \"https://newsapi.org/v2/everything?\"\nquery_api = function(topic, time, apiKey) {\n  query_url &lt;- paste0(base_url, \"q=\", topic, \"&from=\",time,\"&apiKey=\",apiKey)\n  website_info &lt;- GET(query_url)\n  website_parsed &lt;- parsed &lt;- fromJSON(rawToChar(website_info$content))\n  website_articles &lt;- pluck(website_parsed, \"articles\")\n  website_df &lt;- as.data.frame(website_articles)\n  return((website_df))\n}\n\nNow let’s use our function to grab Hurricane information and Climate Change information at two specified dates. Save as two specified R objects.\n\nquery_hurricane &lt;- query_api(topic = \"hurricane\", time = \"2024-10-14\", apiKey = \"7cb2cc16f78541a0bec77fe5e6ddc45a\")\nquery_climate_change &lt;- query_api(topic = \"climate%20change\", time = \"2024-10-15\", apiKey = \"7cb2cc16f78541a0bec77fe5e6ddc45a\")\nhead(query_hurricane)\n\n  source.id             source.name\n1      &lt;NA&gt;                    CNET\n2      &lt;NA&gt;            Slashdot.org\n3      &lt;NA&gt;         Android Central\n4      &lt;NA&gt;                     NPR\n5      &lt;NA&gt;  Pensacola News Journal\n6      &lt;NA&gt; Sarasota Herald-Tribune\n                                                    author\n1                                            Cierra Noffke\n2                                              EditorDavid\n3                                         Nicholas Sutrich\n4                                              Jaclyn Diaz\n5                    Brandon Girod, Pensacola News Journal\n6 Wade Tatangelo and Jimmy Geurts, Sarasota Herald-Tribune\n                                                                                      title\n1                  Starlink Extends 'Free' Hurricane Relief Internet to the End of the Year\n2                     Solar Power Brought by Volunteers to Hurricane Helene's Disaster Zone\n3     Android 15’s new tablet features get me one step closer to ditching my laptop forever\n4                    Come hurricane or high water, Florida island residents promise to stay\n5 Tropical Storm Nadine? 2 disturbances could be next named storm. What Florida should know\n6 Waterfront restaurants open, closed after Hurricane Milton in Sarasota, Bradenton, Venice\n                                                                                                                                                                                                                                                           description\n1                                                                                                              Those affected by Hurricanes Helene and Milton are eligible for free internet through 2024. The caveat? You'll still need to pay the $349 for the dish.\n2 Bobby Renfro spent $1,200 to buy a gas-powered electricity generator for a community resource hub he set up in a former church near hurricane-struck Asheville, North Carolina. He's spending thousands more on fuel, reports the Associated Press — though he's ju…\n3                                                            Android 15 sports a handful of new tablet features that make productivity nearly as good as a laptop. Some tablets already have these features, and I got to put them to good use after Hurricane Helene.\n4                                                      As climate change makes hurricanes stronger and more intense, island communities like Longboat Key are particularly susceptible to catastrophic damage from hurricanes. Residents say they are sticking around.\n5                                                                                                                We could be seeing the first signs of the next named storm, Nadine, as the National Hurricane Center tracks two tropical disturbances in the tropics.\n6                                                                                                                                                                    Open or closed? Updates from waterfront and island restaurants in Sarasota, Bradenton and Venice.\n                                                                                                                                                                      url\n1                                                      https://www.cnet.com/home/internet/starlink-charges-hurricane-survivors-equipment-fees-for-free-starlink-internet/\n2                                               https://hardware.slashdot.org/story/24/10/14/0151238/solar-power-brought-by-volunteers-to-hurricane-helenes-disaster-zone\n3                                             https://www.androidcentral.com/tablets/android-15s-new-tablet-features-get-me-one-step-closer-to-ditching-my-laptop-forever\n4                                                                https://www.npr.org/2024/10/14/nx-s1-5150472/hurricane-milton-helene-longboat-key-florida-barrier-island\n5                                   https://www.pnj.com/story/weather/hurricanes/2024/10/15/tropical-storm-nadine-two-disturbances-could-be-next-named-storm/75684496007/\n6 https://www.heraldtribune.com/story/entertainment/dining/2024/10/15/waterfront-restaurants-open-closed-after-hurricane-milton-sarasota-bradenton-venice-fl/75568699007/\n                                                                                                                                                                                                                   urlToImage\n1                       https://www.cnet.com/a/img/resize/0355a24bfaaa999e455cff9c5470945292c84d39/hub/2024/05/17/a2e117d4-6bcc-4224-ae7d-e75bfe213a49/broadband-starlink-review.jpg?auto=webp&fit=crop&height=675&width=1200\n2                                                                                                                                                                                   https://a.fsdn.com/sd/topics/power_64.png\n3                                                                                                                                                        https://cdn.mos.cms.futurecdn.net/ADFZ3zq4xuESeKM3MfFPrk-1200-80.jpg\n4 https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x1688+0+125/resize/1400/quality/100/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F7e%2Fbf%2Fd6504da449b0ae6d09a63a58338b%2Fdsc5382-2.jpg\n5                                                                                                                                          https://media.zenfs.com/en/pensacola-news-journal/214ac6dfa98a341c61f93e5a849c18f2\n6                                              https://s.yimg.com/ny/api/res/1.2/IxmO1Sdr03en6qL7gi12wA--/YXBwaWQ9aGlnaGxhbmRlcjt3PTEyMDA7aD02Nzg-/https://media.zenfs.com/en/herald-tribune/a1e5ea00a258bd0bac1dac935a22fcf4\n           publishedAt\n1 2024-10-14T19:52:00Z\n2 2024-10-14T07:34:00Z\n3 2024-10-15T17:06:43Z\n4 2024-10-14T09:08:45Z\n5 2024-10-15T14:44:13Z\n6 2024-10-15T09:17:27Z\n                                                                                                                                                                                                                   content\n1   When Starlink's CEO Elon Musk announced on Oct. 1 that all residents in Hurricane Helene's damage path were eligible for 30 days of free service, many people didn't factor in the costs of the $349 eq… [+1647 chars]\n2   Without it, they can't keep medicines cold or power medical equipment or pump well water. They can't recharge their phones or apply for federal disaster aid... Residents who can get their hands on ga… [+1324 chars]\n3   Android 15 is now available on Pixel devices! Along with the myriad of changes and new features is a taskbar update that transforms Android tablets in a way that’s been sorely needed for a long time.… [+5552 chars]\n4 LONGBOAT KEY, Florida When Hurricane Milton hit, the Seabaugh family was in the dark literally and figuratively.\\r\\nHurricane Miltons strong winds knocked out power and Wi-Fi, so they couldnt check on … [+6236 chars]\n5 We could be seeing the first signs of the next named storm, Nadine, as the National Hurricane Center tracks two tropical disturbances in the Atlantic and Caribbean.\\r\\nAccuWeather is also tracking the … [+3836 chars]\n6  Back-to-back blows from Hurricane Milton and Hurricane Helene have caused unprecedented damage to Sarasota and Manatee County homes and businesses, including many of our region's most beloved restaur… [+24986 chars]\n\nhead(query_climate_change)\n\n     source.id         source.name                author\n1         &lt;NA&gt; Scientific American       Lyndsie Bourgon\n2         &lt;NA&gt;     Politicopro.com Zack Colman, E&E News\n3         &lt;NA&gt;         Gizmodo.com         Matthew Gault\n4 the-next-web        The Next Web       Siôn Geschwindt\n5         &lt;NA&gt;                 NPR          Eric Whitney\n6         &lt;NA&gt;            Phys.Org             Ansa Heyl\n                                                                              title\n1    Book Review: Inside the Global Movement to Protect Forests from Climate Change\n2                              Climate-Fueled Disasters Are Raising Insurance Rates\n3                      For the Love of God, Stop Making Inscrutable Doomsday Clocks\n4       German startup OroraTech raises €25M to scale wildfire early warning system\n5  Neighborhoods in Boulder aim to harvest fruit trees before bears have a go at it\n6 Climate change impacts internal migration worldwide, census data analysis reveals\n                                                                                                                                                                                                                                                           description\n1                                                                                                                                                                                                      Lessons from the people making forest ecosystems more resilient\n2                                         Increasingly intense hurricanes, wildfires and other climate disasters have forced these state-run backstop insurance groups into a role typically assumed by the private sector as the primary insurer within their borders\n3                                                                                                                               A business school is using AI doomerism, money from Saudi Arabia, and a dusty Cold War metaphor to get people hyped about AI’s future.\n4 Munich-based startup OroraTech has secured €25mn in funding to scale up its AI-powered wildfire detection system.  Korys, the investment arm of the Colruyt’s — a Belgian noble family — led the funding round. The EU’s Circular Bioeconomy Fund (ECBF) also chipp…\n5                                                                  Climate change and habitat loss are driving bears into urban areas in search of food. In Boulder, Colo., people are making an effort to harvest residential fruit trees to deter visits from bears.\n6 The influence of climate change on migration, both current and future, has garnered significant attention from the public and policymakers over the past decade. A new IIASA-led study has provided the first comprehensive analysis of how climate factors—specifi…\n                                                                                                                               url\n1               https://www.scientificamerican.com/article/book-review-inside-the-global-movement-to-protect-forests-from-climate/\n2 https://subscriber.politicopro.com/article/eenews/2024/10/15/the-growing-climate-threat-to-state-insurance-backstops-ee-00183311\n3                                       https://gizmodo.com/for-the-love-of-god-stop-making-inscrutable-doomsday-clocks-2000512111\n4                             https://thenextweb.com/news/german-startup-ororatech-raises-25-million-wildfire-early-warning-system\n5    https://www.npr.org/2024/10/15/nx-s1-5140551/neighborhoods-in-boulder-aim-to-harvest-fruit-trees-before-bears-have-a-go-at-it\n6                                                  https://phys.org/news/2024-10-climate-impacts-internal-migration-worldwide.html\n                                                                                                                                                                                                                                                  urlToImage\n1                                                                                                                                               https://static.scientificamerican.com/dam/m/439186ccc2b1cf36/original/saw1124Rvws-landscape-oakes.jpg?w=1200\n2                                                                                                                                  https://static.scientificamerican.com/dam/m/29eda41906432682/original/home_sits_on_road_after_hurricane_milton.jpg?w=1200\n3                                                                                                                                                                                                 https://gizmodo.com/app/uploads/2024/10/doomsday_clock.jpg\n4 https://img-cdn.tnwcdn.com/image/tnw-blurple?filter_last=1&fit=1280%2C640&url=https%3A%2F%2Fcdn0.tnwcdn.com%2Fwp-content%2Fblogs.dir%2F1%2Ffiles%2F2023%2F08%2Fsatellite-future-ororatech-rendering-2022-6U.jpg&signature=cdec38942d904a60955b88c24d4b9439\n5                                                                                                                                                                                  https://media.npr.org/include/images/facebook-default-wide-s1400-c100.jpg\n6                                                                                                                                                                                    https://scx2.b-cdn.net/gfx/news/hires/2024/climate-change-impacts-2.jpg\n           publishedAt\n1 2024-10-15T13:00:00Z\n2 2024-10-15T18:00:00Z\n3 2024-10-15T18:00:03Z\n4 2024-10-15T00:01:35Z\n5 2024-10-15T07:15:37Z\n6 2024-10-15T14:41:37Z\n                                                                                                                                                                                                                   content\n1    If you're enjoying this article, consider supporting our award-winning journalism bysubscribing. By purchasing a subscription you are helping to ensure the future of impactful stories about the disco… [+802 chars]\n2   CLIMATEWIRE | The devastation caused by Hurricanes Helene and Milton has sharpened concerns about the financial stability of state-run insurance plans and the escalating climate risks they are taking… [+8881 chars]\n3   A Saudi-backed business school in Switzerland has launched a Doomsday Clock to warn the world about the harms of uncontrolled artificial general intelligence, what it calls a god-like AI. Imagine if … [+5139 chars]\n4 Munich-based startup OroraTech has secured 25mn in funding to scale up its AI-powered wildfire detection system. \\r\\nKorys, the investment arm of the Colruyts a Belgian noble family led the funding rou… [+2868 chars]\n5                      Climate change and habitat loss are driving bears into urban areas in search of food. In Boulder, Colo., people are making an effort to harvest residential fruit trees to deter visits from bears.\n6   The influence of climate change on migration, both current and future, has garnered significant attention from the public and policymakers over the past decade. A new IIASA-led study has provided the… [+5345 chars]\n\n\n\n\nSummarizing from the API Queries\nWe now have interest in taking our two queries saved as R objects and working through them. Here is a one-way contingency table for name of the hurricane set:\n\ntable(query_hurricane$source$name)\n\n\n                [Removed]                  ABC News                    Adweek \n                        4                         5                         1 \n       Al Jazeera English         Android Authority           Android Central \n                        2                         1                         2 \n                 BBC News         Biloxi Sun Herald                Biztoc.com \n                        2                         1                         2 \n          Bleacher Report            Boredpanda.com          Business Insider \n                        1                         2                         1 \n                 CBS News           Cheezburger.com                      CNET \n                        9                         1                         2 \n              Cracked.com                  Deadline               Eonline.com \n                        1                         1                         1 \n                     ESPN                  Fark.com                    Forbes \n                        2                         1                         6 \n               Gizmodo.jp Investor's Business Daily        Lakeplacidnews.com \n                        1                         1                         1 \n             Live Science         Naples Daily News                  NBC News \n                        1                         1                         1 \n            NBCSports.com                       NPR    Pensacola News Journal \n                        1                         1                         1 \n                 Phys.Org                 Pitchfork           Politicopro.com \n                        2                         1                         1 \n                  Poynter              Quartz India          Reporternews.com \n                        3                         1                         1 \n             Ritholtz.com   Sarasota Herald-Tribune       Scientific American \n                        1                         1                         1 \n              Screen Rant                     Skift              Slashdot.org \n                        1                         2                         1 \n           Slate Magazine                Snopes.com                 Space.com \n                        1                         6                         4 \n          Tampa Bay Times                  TechSpot            The New Yorker \n                        1                         1                         2 \n          Theregister.com                     TODAY       Yahoo Entertainment \n                        1                         1                        10 \n\n\nNext, using the wonderful cheat sheet, we convert the publishedAt column into a date column. With this date column, we can find summary statistics of it and do more complex manipulations.\nThen, using some simple piping, we can go ahead and create a new variable that finds the differences in times between the article postings from most recent to second most recent using mutate(). First though, we sort the data using the arrange() function. Note that we are saving them to new dataframes.\n\nquery_hurricane$publishedAt &lt;- ymd_hms(query_hurricane$publishedAt)\nquery_climate_change$publishedAt &lt;- ymd_hms(query_climate_change$publishedAt)\nhead(query_hurricane$publishedAt)\n\n[1] \"2024-10-14 19:52:00 UTC\" \"2024-10-14 07:34:00 UTC\"\n[3] \"2024-10-15 17:06:43 UTC\" \"2024-10-14 09:08:45 UTC\"\n[5] \"2024-10-15 14:44:13 UTC\" \"2024-10-15 09:17:27 UTC\"\n\nhead(query_climate_change$publishedAt)\n\n[1] \"2024-10-15 13:00:00 UTC\" \"2024-10-15 18:00:00 UTC\"\n[3] \"2024-10-15 18:00:03 UTC\" \"2024-10-15 00:01:35 UTC\"\n[5] \"2024-10-15 07:15:37 UTC\" \"2024-10-15 14:41:37 UTC\"\n\ndates_hurricane  &lt;- query_hurricane |&gt;\n  arrange(publishedAt) |&gt;\n  mutate(pub_diff = publishedAt - lag(publishedAt))\n\ndates_climate_change &lt;- query_climate_change |&gt;\n  arrange(publishedAt) |&gt;\n  mutate(pub_diff = publishedAt - lag(publishedAt))\n\nLet’s now subset the query for hurricane and climate change to only include the publishedAt and pub_diff columns. Then, using map() and an anonymous function, we can find the means and standard deviations for the two columns and return them as a list.\nHurricane First:\n\ndates_hurricane &lt;- dates_hurricane  |&gt;\n  select(publishedAt, pub_diff)\n\nmap(dates_hurricane, \\(x){\n  list(\n    mean = mean(x, na.rm = TRUE),\n    sd = sd(x, na.rm = TRUE),\n    median = median(x, na.rm = TRUE)\n  )\n})\n\n$publishedAt\n$publishedAt$mean\n[1] \"2024-10-15 00:41:19 UTC\"\n\n$publishedAt$sd\n[1] 51398.85\n\n$publishedAt$median\n[1] \"2024-10-14 19:57:19 UTC\"\n\n\n$pub_diff\n$pub_diff$mean\nTime difference of 1661.03 secs\n\n$pub_diff$sd\n[1] 2634.789\n\n$pub_diff$median\nTime difference of 960 secs\n\n\nClimate Change Last:\n\ndates_climate_change &lt;- dates_climate_change  |&gt;\n  select(publishedAt, pub_diff)\n\nmap(dates_climate_change, \\(x){\n  list(\n    mean = mean(x, na.rm = TRUE),\n    sd = sd(x, na.rm = TRUE),\n    median = median(x, na.rm = TRUE)\n  )\n})\n\n$publishedAt\n$publishedAt$mean\n[1] \"2024-10-15 12:22:19 UTC\"\n\n$publishedAt$sd\n[1] 21842.59\n\n$publishedAt$median\n[1] \"2024-10-15 13:00:04 UTC\"\n\n\n$pub_diff\n$pub_diff$mean\nTime difference of 815.4242 secs\n\n$pub_diff$sd\n[1] 1213.302\n\n$pub_diff$median\nTime difference of 525 secs"
  }
]